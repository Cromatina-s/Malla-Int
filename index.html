from pathlib import Path

# Ruta del archivo HTML
html_path = Path("/mnt/data/malla_farmacia_index.html")

# Contenido del archivo HTML (resumen: con estructura por año/cuatrimestre, colores naranja/beige, CBC obligatorio)
html_content = """
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Malla Interactiva - Farmacia UBA (Plan 2023)</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #fffaf3;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #c04e01;
      margin-bottom: 30px;
    }
    .anios {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }
    .anio {
      width: 300px;
      background-color: #fff3e0;
      border: 2px solid #ffa94d;
      border-radius: 8px;
      padding: 15px;
    }
    .anio h2 {
      text-align: center;
      background-color: #ffa94d;
      color: white;
      padding: 10px;
      margin-top: 0;
      border-radius: 6px;
    }
    .cuatri h3 {
      margin-top: 20px;
      color: #b34700;
      font-size: 16px;
      border-bottom: 1px solid #ffa94d;
    }
    .materia {
      background-color: #ffd8a8;
      margin: 5px 0;
      padding: 8px;
      border-radius: 5px;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.3s;
      position: relative;
    }
    .materia:hover {
      background-color: #ffbe78;
    }
    .materia.aprobada {
      background-color: #ff922b;
      color: white;
    }
    .materia.bloqueada {
      background-color: #eee;
      color: #aaa;
      cursor: not-allowed;
    }
    .materia[data-tooltip]:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      top: -30px;
      background: #333;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      white-space: pre-line;
      z-index: 10;
    }
    #reset {
      display: block;
      margin: 30px auto;
      padding: 10px 20px;
      background: #c04e01;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
    }
    #reset:hover {
      background: #a84300;
    }
  </style>
</head>
<body>
  <h1>Malla Interactiva - Farmacia UBA (Plan 2023)</h1>
  <button id="reset">Reiniciar progreso</button>
  <div class="anios" id="malla"></div>

  <script>
    const materias = {
      // CBC
      "matematica": { nombre: "Matemática", anio: "CBC", cuatri: "1" },
      "quimica": { nombre: "Química", anio: "CBC", cuatri: "1" },
      "icse": { nombre: "ICSE", anio: "CBC", cuatri: "1" },
      "ipc": { nombre: "IPC", anio: "CBC", cuatri: "2" },
      "biocel": { nombre: "Biología Celular", anio: "CBC", cuatri: "2" },
      "fisica-cbc": { nombre: "Física e Introducción", anio: "CBC", cuatri: "2" },

      // 1º año
      "mate1": { nombre: "Matemática", anio: "1", cuatri: "1", requiere: ["matematica"] },
      "qgi": { nombre: "Q. General e Inorgánica", anio: "1", cuatri: "1", requiere: ["quimica"] },
      "aeh": { nombre: "Anatomía e Histología", anio: "1", cuatri: "1", requiere: ["biocel"] },
      "fisica": { nombre: "Física", anio: "1", cuatri: "2", requiere: ["mate1", "fisica-cbc"] },
      "bcm": { nombre: "Biología Celular y Molecular", anio: "1", cuatri: "2", requiere: ["aeh"] },
      "qo1": { nombre: "Q. Orgánica I", anio: "1", cuatri: "2", requiere: ["qgi"] },

      // (Y así se continúa para el resto de los años...)
    };

    const aprobadas = new Set(JSON.parse(localStorage.getItem("materiasAprobadas")) || []);
    const malla = document.getElementById("malla");

    const anios = ["CBC", "1", "2", "3", "4", "5"];
    const cuatris = ["1", "2"];

    anios.forEach(anio => {
      const col = document.createElement("div");
      col.className = "anio";
      const h2 = document.createElement("h2");
      h2.textContent = anio === "CBC" ? "Ciclo Básico Común" : `Año ${anio}`;
      col.appendChild(h2);

      cuatris.forEach(cuatri => {
        const cuatriDiv = document.createElement("div");
        cuatriDiv.className = "cuatri";
        const h3 = document.createElement("h3");
        h3.textContent = `${cuatri}º Cuatrimestre`;
        cuatriDiv.appendChild(h3);

        Object.entries(materias).forEach(([id, mat]) => {
          if (mat.anio === anio && mat.cuatri === cuatri) {
            const div = document.createElement("div");
            div.className = "materia";
            div.textContent = mat.nombre;
            div.id = id;

            const requisitos = mat.requiere || [];
            const faltan = requisitos.filter(r => !aprobadas.has(r));

            if (anio !== "CBC" && anio !== "1" && !cbcCompleto()) {
              div.classList.add("bloqueada");
              div.setAttribute("data-tooltip", "Debes aprobar todo el CBC");
            } else if (faltan.length > 0) {
              div.classList.add("bloqueada");
              div.setAttribute("data-tooltip", "Faltan:\n" + faltan.map(f => materias[f]?.nombre || f).join("\n"));
            } else {
              div.addEventListener("click", () => {
                aprobadas.add(id);
                localStorage.setItem("materiasAprobadas", JSON.stringify([...aprobadas]));
                location.reload();
              });
            }

            if (aprobadas.has(id)) {
              div.classList.add("aprobada");
              div.classList.remove("bloqueada");
              div.removeAttribute("data-tooltip");
            }

            cuatriDiv.appendChild(div);
          }
        });

        col.appendChild(cuatriDiv);
      });

      malla.appendChild(col);
    });

    function cbcCompleto() {
      return ["matematica", "quimica", "icse", "ipc", "biocel", "fisica-cbc"].every(m => aprobadas.has(m));
    }

    document.getElementById("reset").addEventListener("click", () => {
      if (confirm("¿Deseas reiniciar el progreso?")) {
        localStorage.removeItem("materiasAprobadas");
        location.reload();
      }
    });
  </script>
</body>
</html>
"""
